{"version":3,"file":"SessionLobbyPage-Bv3jHUxA.js","sources":["../../src/pages/SessionLobbyPage.tsx"],"sourcesContent":["// Session Lobby page - Waiting room showing participants before selection starts\n// Based on: specs/001-dinner-decider-enables/tasks.md T054\n\nimport { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useSessionStore } from '../stores/sessionStore';\nimport { getSession } from '../services/apiClient';\n\nexport default function SessionLobbyPage() {\n  const navigate = useNavigate();\n  const { sessionCode } = useParams<{ sessionCode: string }>();\n  const { participants, isConnected } = useSessionStore();\n  const [shareableLink, setShareableLink] = useState('');\n  const [copied, setCopied] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    // Fetch session details to get shareable link\n    const loadSession = async () => {\n      if (!sessionCode) return;\n\n      try {\n        const session = await getSession(sessionCode);\n        setShareableLink(session.shareableLink);\n      } catch (err) {\n        console.error('Failed to load session:', err);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadSession();\n  }, [sessionCode]);\n\n  const handleCopyCode = () => {\n    if (sessionCode) {\n      navigator.clipboard.writeText(sessionCode);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n\n  const handleCopyLink = () => {\n    if (shareableLink) {\n      navigator.clipboard.writeText(shareableLink);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n\n  const handleStartSelecting = () => {\n    navigate(`/session/${sessionCode}/select`);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"inline-block w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading session...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 px-4 py-8\">\n      <div className=\"max-w-md mx-auto\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n            Session Lobby\n          </h1>\n          <p className=\"text-gray-600\">\n            Waiting for participants to join\n          </p>\n        </div>\n\n        {/* Session Code Card */}\n        <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6\">\n          <h2 className=\"text-sm font-medium text-gray-700 mb-2 text-center\">\n            Session Code\n          </h2>\n          <div className=\"flex items-center justify-center space-x-2\">\n            <div className=\"text-3xl font-mono font-bold text-blue-600 tracking-widest\">\n              {sessionCode}\n            </div>\n            <button\n              onClick={handleCopyCode}\n              className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n              title=\"Copy code\"\n            >\n              {copied ? '‚úì' : 'üìã'}\n            </button>\n          </div>\n\n          {shareableLink && (\n            <button\n              onClick={handleCopyLink}\n              className=\"mt-4 w-full px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n            >\n              {copied ? 'Copied!' : 'Copy shareable link'}\n            </button>\n          )}\n        </div>\n\n        {/* Participants List */}\n        <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\n            Participants ({participants.length}/4)\n          </h2>\n\n          <div className=\"space-y-3\">\n            {participants.map((participant) => (\n              <div\n                key={participant.participantId}\n                className=\"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg\"\n              >\n                <div className=\"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold\">\n                  {participant.displayName.charAt(0).toUpperCase()}\n                </div>\n                <div className=\"flex-1\">\n                  <p className=\"font-medium text-gray-900\">\n                    {participant.displayName}\n                    {participant.isHost && (\n                      <span className=\"ml-2 text-xs text-blue-600 font-semibold\">\n                        HOST\n                      </span>\n                    )}\n                  </p>\n                </div>\n                <div className=\"text-green-500\">‚óè</div>\n              </div>\n            ))}\n\n            {/* Empty slots */}\n            {[...Array(4 - participants.length)].map((_, i) => (\n              <div\n                key={`empty-${i}`}\n                className=\"flex items-center space-x-3 p-3 border-2 border-dashed border-gray-300 rounded-lg\"\n              >\n                <div className=\"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-gray-400\">\n                  ?\n                </div>\n                <p className=\"text-gray-400\">Waiting for participant...</p>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Connection Status */}\n        {!isConnected && (\n          <div className=\"mb-6 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\n            <p className=\"text-sm text-yellow-700\">‚ö†Ô∏è Disconnected from server</p>\n          </div>\n        )}\n\n        {/* Start Button */}\n        <button\n          onClick={handleStartSelecting}\n          disabled={participants.length === 0}\n          className=\"w-full min-h-[44px] px-6 py-3 text-lg font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed active:scale-[0.98] transition-all shadow-lg\"\n        >\n          Start Selecting\n        </button>\n\n        {/* Info */}\n        <div className=\"mt-6 text-center text-sm text-gray-500\">\n          <p>Share the code with friends to invite them</p>\n          <p className=\"mt-1\">Sessions expire after 30 minutes of inactivity</p>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":["SessionLobbyPage","navigate","useNavigate","sessionCode","useParams","participants","isConnected","useSessionStore","shareableLink","setShareableLink","useState","copied","setCopied","isLoading","setIsLoading","useEffect","session","getSession","err","handleCopyCode","handleCopyLink","handleStartSelecting","jsxs","jsx","participant","_","i"],"mappings":"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"}