const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-b170zRlW.js","assets/router-BsRkIn4w.js","assets/react-vendor-CBH9K-97.js","assets/socket-TjCxX7sJ.js","assets/state-CJScMKLL.js","assets/CreateSessionPage-DdOvty74.js","assets/apiClient-2onQ2JwX.js","assets/JoinSessionPage-DjRCUfTj.js","assets/SessionLobbyPage-CY5tADXM.js","assets/SelectionPage-D9qL67qd.js","assets/ResultsPage-K-YZRvzJ.js"])))=>i.map(i=>d[i]);
import{r as O,b as J,a as B}from"./react-vendor-CBH9K-97.js";import{B as $,R as M,a as b}from"./router-BsRkIn4w.js";import{l as q}from"./socket-TjCxX7sJ.js";import{c as K}from"./state-CJScMKLL.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();var z={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W=O,X=Symbol.for("react.element"),G=Symbol.for("react.fragment"),Y=Object.prototype.hasOwnProperty,Q=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Z={key:!0,ref:!0,__self:!0,__source:!0};function k(e,n,s){var o,t={},r=null,u=null;s!==void 0&&(r=""+s),n.key!==void 0&&(r=""+n.key),n.ref!==void 0&&(u=n.ref);for(o in n)Y.call(n,o)&&!Z.hasOwnProperty(o)&&(t[o]=n[o]);if(e&&e.defaultProps)for(o in n=e.defaultProps,n)t[o]===void 0&&(t[o]=n[o]);return{$$typeof:X,type:e,key:r,ref:u,props:t,_owner:Q.current}}j.Fragment=G;j.jsx=k;j.jsxs=k;z.exports=j;var v=z.exports,L={},D=J;L.createRoot=D.createRoot,L.hydrateRoot=D.hydrateRoot;const V="modulepreload",ee=function(e){return"/"+e},A={},R=function(n,s,o){let t=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));t=Promise.allSettled(s.map(S=>{if(S=ee(S),S in A)return;A[S]=!0;const m=S.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${S}"]${p}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":V,m||(y.as="script"),y.crossOrigin="",y.href=S,d&&y.setAttribute("nonce",d),document.head.appendChild(y),m)return new Promise((g,h)=>{y.addEventListener("load",g),y.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${S}`)))})}))}function r(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return t.then(u=>{for(const d of u||[])d.status==="rejected"&&r(d.reason);return n().catch(r)})},P={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"https://backend-production-4ce9.up.railway.app/api",VITE_BACKEND_URL:"https://backend-production-4ce9.up.railway.app"},T=new Map,x=e=>{const n=T.get(e);return n?Object.fromEntries(Object.entries(n.stores).map(([s,o])=>[s,o.getState()])):{}},te=(e,n,s)=>{if(e===void 0)return{type:"untracked",connection:n.connect(s)};const o=T.get(s.name);if(o)return{type:"tracked",store:e,...o};const t={connection:n.connect(s),stores:{}};return T.set(s.name,t),{type:"tracked",store:e,...t}},ne=(e,n={})=>(s,o,t)=>{const{enabled:r,anonymousActionType:u,store:d,...S}=n;let m;try{m=(r??(P?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!m)return(P?"production":void 0)!=="production"&&r&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(s,o,t);const{connection:p,...y}=te(d,m,S);let g=!0;t.setState=(a,c,l)=>{const i=s(a,c);if(!g)return i;const _=l===void 0?{type:u||"anonymous"}:typeof l=="string"?{type:l}:l;return d===void 0?(p==null||p.send(_,o()),i):(p==null||p.send({..._,type:`${d}/${_.type}`},{...x(S.name),[d]:t.getState()}),i)};const h=(...a)=>{const c=g;g=!1,s(...a),g=c},E=e(t.setState,o,t);if(y.type==="untracked"?p==null||p.init(E):(y.stores[y.store]=t,p==null||p.init(Object.fromEntries(Object.entries(y.stores).map(([a,c])=>[a,a===y.store?E:c.getState()])))),t.dispatchFromDevtools&&typeof t.dispatch=="function"){let a=!1;const c=t.dispatch;t.dispatch=(...l)=>{(P?"production":void 0)!=="production"&&l[0].type==="__setState"&&!a&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),a=!0),c(...l)}}return p.subscribe(a=>{var c;switch(a.type){case"ACTION":if(typeof a.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return C(a.payload,l=>{if(l.type==="__setState"){if(d===void 0){h(l.state);return}Object.keys(l.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const i=l.state[d];if(i==null)return;JSON.stringify(t.getState())!==JSON.stringify(i)&&h(i);return}t.dispatchFromDevtools&&typeof t.dispatch=="function"&&t.dispatch(l)});case"DISPATCH":switch(a.payload.type){case"RESET":return h(E),d===void 0?p==null?void 0:p.init(t.getState()):p==null?void 0:p.init(x(S.name));case"COMMIT":if(d===void 0){p==null||p.init(t.getState());return}return p==null?void 0:p.init(x(S.name));case"ROLLBACK":return C(a.state,l=>{if(d===void 0){h(l),p==null||p.init(t.getState());return}h(l[d]),p==null||p.init(x(S.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return C(a.state,l=>{if(d===void 0){h(l);return}JSON.stringify(t.getState())!==JSON.stringify(l[d])&&h(l[d])});case"IMPORT_STATE":{const{nextLiftedState:l}=a.payload,i=(c=l.computedStates.slice(-1)[0])==null?void 0:c.state;if(!i)return;h(d===void 0?i:i[d]),p==null||p.send(null,l);return}case"PAUSE_RECORDING":return g=!g}return}}),E},re=ne,C=(e,n)=>{let s;try{s=JSON.parse(e)}catch(o){console.error("[zustand devtools middleware] Could not parse the received json",o)}s!==void 0&&n(s)};function oe(e,n){let s;try{s=e()}catch{return}return{getItem:t=>{var r;const u=S=>S===null?null:JSON.parse(S,void 0),d=(r=s.getItem(t))!=null?r:null;return d instanceof Promise?d.then(u):u(d)},setItem:(t,r)=>s.setItem(t,JSON.stringify(r,void 0)),removeItem:t=>s.removeItem(t)}}const w=e=>n=>{try{const s=e(n);return s instanceof Promise?s:{then(o){return w(o)(s)},catch(o){return this}}}catch(s){return{then(o){return this},catch(o){return w(o)(s)}}}},se=(e,n)=>(s,o,t)=>{let r={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:c=>c,version:0,merge:(c,l)=>({...l,...c}),...n},u=!1;const d=new Set,S=new Set;let m;try{m=r.getStorage()}catch{}if(!m)return e((...c)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),s(...c)},o,t);const p=w(r.serialize),y=()=>{const c=r.partialize({...o()});let l;const i=p({state:c,version:r.version}).then(_=>m.setItem(r.name,_)).catch(_=>{l=_});if(l)throw l;return i},g=t.setState;t.setState=(c,l)=>{g(c,l),y()};const h=e((...c)=>{s(...c),y()},o,t);let E;const a=()=>{var c;if(!m)return;u=!1,d.forEach(i=>i(o()));const l=((c=r.onRehydrateStorage)==null?void 0:c.call(r,o()))||void 0;return w(m.getItem.bind(m))(r.name).then(i=>{if(i)return r.deserialize(i)}).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==r.version){if(r.migrate)return r.migrate(i.state,i.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return i.state}).then(i=>{var _;return E=r.merge(i,(_=o())!=null?_:h),s(E,!0),y()}).then(()=>{l==null||l(E,void 0),u=!0,S.forEach(i=>i(E))}).catch(i=>{l==null||l(void 0,i)})};return t.persist={setOptions:c=>{r={...r,...c},c.getStorage&&(m=c.getStorage())},clearStorage:()=>{m==null||m.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>a(),hasHydrated:()=>u,onHydrate:c=>(d.add(c),()=>{d.delete(c)}),onFinishHydration:c=>(S.add(c),()=>{S.delete(c)})},a(),E||h},ie=(e,n)=>(s,o,t)=>{let r={storage:oe(()=>localStorage),partialize:a=>a,version:0,merge:(a,c)=>({...c,...a}),...n},u=!1;const d=new Set,S=new Set;let m=r.storage;if(!m)return e((...a)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),s(...a)},o,t);const p=()=>{const a=r.partialize({...o()});return m.setItem(r.name,{state:a,version:r.version})},y=t.setState;t.setState=(a,c)=>{y(a,c),p()};const g=e((...a)=>{s(...a),p()},o,t);t.getInitialState=()=>g;let h;const E=()=>{var a,c;if(!m)return;u=!1,d.forEach(i=>{var _;return i((_=o())!=null?_:g)});const l=((c=r.onRehydrateStorage)==null?void 0:c.call(r,(a=o())!=null?a:g))||void 0;return w(m.getItem.bind(m))(r.name).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==r.version){if(r.migrate)return[!0,r.migrate(i.state,i.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,i.state];return[!1,void 0]}).then(i=>{var _;const[F,H]=i;if(h=r.merge(H,(_=o())!=null?_:g),s(h,!0),F)return p()}).then(()=>{l==null||l(h,void 0),h=o(),u=!0,S.forEach(i=>i(h))}).catch(i=>{l==null||l(void 0,i)})};return t.persist={setOptions:a=>{r={...r,...a},a.storage&&(m=a.storage)},clearStorage:()=>{m==null||m.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>E(),hasHydrated:()=>u,onHydrate:a=>(d.add(a),()=>{d.delete(a)}),onFinishHydration:a=>(S.add(a),()=>{S.delete(a)})},r.skipHydration||E(),h||g},ae=(e,n)=>"getStorage"in n||"serialize"in n||"deserialize"in n?((P?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),se(e,n)):ie(e,n),ce=ae,N={sessionCode:null,participants:[],currentUserId:null,selections:[],allSelections:{},overlappingOptions:[],sessionStatus:"waiting",isConnected:!1},I=K()(re(ce(e=>({...N,setSessionCode:n=>e({sessionCode:n}),setCurrentUserId:n=>e({currentUserId:n}),addParticipant:n=>e(s=>{const o=s.participants.findIndex(t=>t.participantId===n.participantId);if(o>=0){const t=[...s.participants];return t[o]={...t[o],...n},{participants:t}}return{participants:[...s.participants,n]}}),removeParticipant:n=>e(s=>({participants:s.participants.filter(o=>o.participantId!==n)})),updateParticipants:n=>e({participants:n}),updateParticipantOnlineStatus:(n,s)=>e(o=>({participants:o.participants.map(t=>t.participantId===n?{...t,isOnline:s}:t)})),setSelections:n=>e({selections:n}),toggleSelection:n=>e(s=>({selections:s.selections.includes(n)?s.selections.filter(t=>t!==n):[...s.selections,n]})),setResults:n=>e({allSelections:n.allSelections,overlappingOptions:n.overlappingOptions,sessionStatus:"complete"}),setSessionStatus:n=>e({sessionStatus:n}),setConnectionStatus:n=>e({isConnected:n}),resetSession:()=>e(N),resetSelections:()=>e({selections:[],allSelections:{},overlappingOptions:[],sessionStatus:"selecting"})}),{name:"dinner-session-storage"}),{name:"DinnerSession"})),le="https://backend-production-4ce9.up.railway.app";let f=null;function de(){if(f!=null&&f.connected){console.log("Socket already connected");return}f=q(le,{reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:1e4}),f.on("connect",()=>{const e=f==null?void 0:f.id;console.log("Socket connected:",e),I.getState().setConnectionStatus(!0),e&&I.getState().setCurrentUserId(e)}),f.on("disconnect",e=>{console.log("Socket disconnected:",e),I.getState().setConnectionStatus(!1)}),f.on("connect_error",e=>{console.error("Socket connection error:",e),I.getState().setConnectionStatus(!1)}),ue()}function ue(){f&&(f.on("participant:joined",e=>{console.log("Participant joined:",e),I.getState().addParticipant({participantId:e.participantId,displayName:e.displayName,sessionCode:"",joinedAt:Date.now(),hasSubmitted:!1,isHost:!1,isOnline:e.isOnline??!0})}),f.on("participant:left",e=>{console.log("Participant left:",e),I.getState().updateParticipantOnlineStatus(e.participantId,e.isOnline??!1)}),f.on("participant:submitted",e=>{console.log("Participant submitted:",e);const n=I.getState(),s=n.participants.map(o=>o.participantId===e.participantId?{...o,hasSubmitted:!0}:o);n.updateParticipants(s)}),f.on("session:results",e=>{console.log("Session results:",e),I.getState().setResults({sessionCode:e.sessionCode,overlappingOptions:e.overlappingOptions,allSelections:e.allSelections,hasOverlap:e.hasOverlap})}),f.on("session:restarted",e=>{console.log("Session restarted:",e),I.getState().resetSelections()}),f.on("session:expired",e=>{console.log("Session expired:",e),I.getState().setSessionStatus("expired")}),f.on("error",e=>{console.error("Socket error:",e)}))}function Oe(e,n){return new Promise((s,o)=>{if(!(f!=null&&f.connected)){o(new Error("Socket not connected"));return}const t={sessionCode:e,displayName:n};f.emit("session:join",t,r=>{r.success&&r.participants?(I.getState().setSessionCode(e),I.getState().updateParticipants(r.participants.map(u=>({...u,sessionCode:e,joinedAt:Date.now(),hasSubmitted:!1,isOnline:u.isOnline??!0}))),s(r)):o(new Error(r.error||"Failed to join session"))})})}function be(e,n){return new Promise((s,o)=>{if(!(f!=null&&f.connected)){o(new Error("Socket not connected"));return}const t={sessionCode:e,selections:n};f.emit("selection:submit",t,r=>{r.success?s(r):o(new Error(r.error||"Failed to submit selection"))})})}function Re(e){return new Promise((n,s)=>{if(!(f!=null&&f.connected)){s(new Error("Socket not connected"));return}const o={sessionCode:e};f.emit("session:restart",o,t=>{t.success?n():s(new Error(t.error||"Failed to restart session"))})})}const U=O.lazy(()=>R(()=>import("./HomePage-b170zRlW.js"),__vite__mapDeps([0,1,2,3,4]))),pe=O.lazy(()=>R(()=>import("./CreateSessionPage-DdOvty74.js"),__vite__mapDeps([5,2,6,1,3,4]))),fe=O.lazy(()=>R(()=>import("./JoinSessionPage-DjRCUfTj.js"),__vite__mapDeps([7,2,1,3,4]))),me=O.lazy(()=>R(()=>import("./SessionLobbyPage-CY5tADXM.js"),__vite__mapDeps([8,2,6,1,3,4]))),Se=O.lazy(()=>R(()=>import("./SelectionPage-D9qL67qd.js"),__vite__mapDeps([9,2,6,1,3,4]))),ve=O.lazy(()=>R(()=>import("./ResultsPage-K-YZRvzJ.js"),__vite__mapDeps([10,2,1,3,4])));function he(){return v.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"inline-block w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),v.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}function ye(){return O.useEffect(()=>(de(),()=>{}),[]),v.jsx($,{children:v.jsx(O.Suspense,{fallback:v.jsx(he,{}),children:v.jsxs(M,{children:[v.jsx(b,{path:"/",element:v.jsx(U,{})}),v.jsx(b,{path:"/create",element:v.jsx(pe,{})}),v.jsx(b,{path:"/join",element:v.jsx(fe,{})}),v.jsx(b,{path:"/session/:sessionCode",element:v.jsx(me,{})}),v.jsx(b,{path:"/session/:sessionCode/select",element:v.jsx(Se,{})}),v.jsx(b,{path:"/session/:sessionCode/results",element:v.jsx(ve,{})}),v.jsx(b,{path:"*",element:v.jsx(U,{})})]})})})}L.createRoot(document.getElementById("root")).render(v.jsx(B.StrictMode,{children:v.jsx(ye,{})}));export{Oe as a,v as j,Re as r,be as s,I as u};
//# sourceMappingURL=index-p6RFt118.js.map
